var x=Object.defineProperty,w=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var y=(a,t,s)=>t in a?x(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,f=(a,t)=>{for(var s in t||(t={}))I.call(t,s)&&y(a,s,t[s]);if(b)for(var s of b(t))M.call(t,s)&&y(a,s,t[s]);return a},v=(a,t)=>w(a,C(t));import{j as e,a as u,r as g,P as L,S as O,i as j,s as N,b as k,C as A,R as D}from"./vendor.3cdc3318.js";const F=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}};F();const P=({message:a})=>a.attachments&&a.attachments.length>0?e("img",{src:a.attachments[0].file,alt:"message-attachment",className:"message-image",style:{float:"right"}}):e("div",{className:"message",style:{float:"right",marginRight:"18px",color:"white",backgroundColor:"#3B2A50"},children:a.text}),U=({lastMessage:a,message:t})=>{const s=!a||a.sender.username!==t.sender.username;return u("div",{className:"message-row",children:[s&&e("div",{className:"message-avatar",style:{backgroundImage:t.sender&&`url(${t.sender.avatar})`}}),t.attachments&&t.attachments.length>0?e("img",{src:t.attachments[0].file,alt:"message-attachment",className:"message-image",style:{marginLeft:s?"4px":"48px"}}):e("div",{className:"message",style:{float:"left",backgroundColor:"#CABCDC",marginLeft:s?"4px":"48px"},children:t.text})]})},$=a=>{const[t,s]=g.exports.useState(""),{chatId:l,creds:r}=a,n=c=>{s(c.target.value),j(a,l)},o=c=>{c.preventDefault();const d=t.trim();d.length>0&&N(r,l,{text:d}),s("")};return u("form",{className:"message-form",onSubmit:o,children:[e("input",{className:"message-input",placeholder:"Send a message...",value:t,onChange:n,onSubmit:o}),e("label",{htmlFor:"upload-button",children:e("span",{className:"image-button",children:e(L,{className:"picture-icon"})})}),e("input",{type:"file",multiple:!1,id:"upload-button",style:{display:"none"},onChange:(c=>{N(r,l,{files:c.target.files,text:""})}).bind(globalThis)}),e("button",{type:"submit",className:"send-button",children:e(O,{className:"send-icon"})})]})},R=a=>{const{chats:t,activeChat:s,userName:l,messages:r}=a,n=t&&t[s],o=(c,d)=>n.people.map((m,h)=>m.last_read===c.id&&e("div",{className:"read-receipt",style:{float:d?"right":"left",backgroundImage:m.person.avatar&&`url(${m.person.avatar})`}},`read_${h}`)),i=()=>{const c=Object.keys(r);return c.map((d,m)=>{const h=r[d],S=m===0?null:c[m-1],p=l===h.sender.username;return u("div",{style:{width:"100%"},children:[e("div",{className:"message-block",children:p?e(P,{message:h}):e(U,{message:h,lastMessage:r[S]})}),e("div",{className:"read-receipts",style:{marginRight:p?"18px":"0px",marginLeft:p?"0px":"68px"},children:o(h,p)})]},`msg_${m}`)})};return n?u("div",{className:"chat-feed",children:[u("div",{className:"chat-title-container",children:[e("div",{className:"chat-title",children:n==null?void 0:n.title}),e("div",{className:"chat-subtitle",children:n.people.map(c=>` ${c.person.username}`)})]}),i(),e("div",{style:{height:"100px"}}),e("div",{className:"message-form-container",children:e($,v(f({},a),{chatId:s}))})]}):e("div",{})},B="4175a0e2-a95c-49cb-bbb3-40056d23fc05",E=()=>{const[a,t]=g.exports.useState(""),[s,l]=g.exports.useState(""),[r,n]=g.exports.useState("");return e("div",{className:"wrapper",children:u("div",{className:"form",children:[e("h1",{className:"title",children:"LOGIN"}),u("form",{onSubmit:async i=>{i.preventDefault();const c={"Project-ID":B,"User-Name":a,"User-Secret":s};try{await k.get("https://api.chatengine.io/chats",{headers:c}),localStorage.setItem("username",a),localStorage.setItem("password",s),window.location.reload(),n("")}catch{n("Try Again!!!")}},children:[e("input",{type:"text",value:a,onChange:i=>t(i.target.value),className:"input",placeholder:"Username",required:!0}),e("input",{type:"password",value:s,onChange:i=>l(i.target.value),className:"input",placeholder:"Password",required:!0}),e("div",{align:"center",children:e("button",{type:"submit",className:"button",children:e("span",{children:"Start chatting"})})})]}),e("h1",{className:"error",children:r})]})})},T="4175a0e2-a95c-49cb-bbb3-40056d23fc05",q=()=>localStorage.getItem("username")?e(A,{offset:6,height:"100vh",projectID:T,userName:localStorage.getItem("username"),userSecret:localStorage.getItem("password"),renderChatFeed:a=>e(R,f({},a)),onNewMessage:()=>new Audio("https://chat-engine-assets.s3.amazonaws.com/click.mp3").play()}):e(E,{});D.render(e(q,{}),document.getElementById("root"));
